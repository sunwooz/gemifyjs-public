(function(){var e,t,a,o,n,r;a=function(){var e;return e=parseInt($("#jem_id").text()),$.ajax({url:"/get_gem_repo",dataType:"json",data:{jem_id:e},success:function(e){var t,a,o;return console.log("success grabGemRepo"),console.log(e),a=$("#jem_name").text(),t=$("<a></a>").attr("href",e.gem_repo_link).attr("target","_blank").addClass("github-repo-value"),$("#github-repo-value").text("").prepend(t),$(".github-repo-value").text("github/"+a),o=$("<a></a>").attr("href",e.rubygem_link).attr("target","_blank").addClass("rubygem-value"),$("#rubygem-value").text("").prepend(o),$(".rubygem-value").text("Rubygem Link")},error:function(e){return console.log("error with grabGemRepo"),console.log(e)}})},o=function(){var e;return e=$("#job_id").text(),console.log("sending "+e+"to /percentage_done"),$.ajax({url:"/percentage_done",data:{job_id:e},success:function(e){var t;return t="width: "+e.percentage_done+"%;",$("#job-progress").attr("style",t).text(e.percentage_done+"%"),$("#job_messages h2").text(e.job_message),console.log(e.percentage_done),$(".make-gem-button").hasClass("disabled")||($(".make-gem-button").addClass("disabled"),$(".make-gem-button").prop("disabled",!0)),"100%"!==$("#job-progress").text()?setTimeout(o,1500):($(".make-gem-button").removeClass("disabled"),$(".make-gem-button").prop("disabled",!1),a(),n())}})},n=function(){return $(".submit-container #generate-gem-form").remove(),$(".update-modal-button").remove(),$("#update-modal-button").remove(),$(".submit-container").prepend('<input type="submit" class="btn btn-primary btn-sm pull-right update-modal-button" data-toggle="modal" data-target="#versionModal" value="Update Gem">')},r=function(){var e,t,a;return console.log("Update version button clicked"),a=$("#new_version_number").val(),e=$("#jem_id").text(),t=$("#new_commit_message").val(),$.ajax({url:"/update_version",type:"POST",data:{new_jem_version:a,new_commit_message:t,id:e},success:function(e){return console.log("Version updated to"+e)},error:function(){return alert("failed to update!")}})},e=function(){return 0===$("#file-list tbody tr").size()?(console.log("buttons disabled"),$(".make-gem-button").prop("disabled",!0)):void 0},t=function(){return console.log("buttons enabled"),$(".make-gem-button").prop("disabled",!1)},$(function(){return alert("cheese"),$("#new-script").fileupload({dataType:"script",add:function(e,a){var o,n;return n=/(\.|\/)(js|coffee|css|scss|jpe?g|png|gif)$/i,o=a.files[0],n.test(o.type)||n.test(o.name)?($("#new-script").append(a.context),t(),$(".no-gems-panel").fadeOut(),a.submit()):alert(o.name+" is not a javascript, CSS, or image file")}}),e(),$("#job-id-container").bind("DOMSubtreeModified",o),$("#update-gem-button").click(function(){var e;return e="width: 0%;",$("#job-progress").attr("style",e).text("0%"),r(),$("#versionModal").modal("hide")})})}).call(this);